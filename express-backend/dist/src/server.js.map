{"version":3,"sources":["../../src/server.ts"],"sourcesContent":["import express from 'express';\r\nimport cors from 'cors';\r\nimport dotenv from 'dotenv';\r\nimport contactRoutes from './routes/contactRoutes.js';\r\nimport careersRoutes from './routes/careersRoutes.js';\r\nimport rateLimit from 'express-rate-limit';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\n\r\ndotenv.config();\r\n\r\nconst app = express();\r\nconst port = process.env.PORT || 3001;\r\nconst corsOptions = {\r\n  origin: 'http://localhost:5173', // frontend port\r\n};\r\n\r\nconst apiLimiter = rateLimit({\r\n\twindowMs: 15 * 60 * 1000, // 15 minutes\r\n\tmax: 30, // limit each IP to n requests per windowMs (15 minutes)\r\n\tmessage: \"Too many requests from this IP, please try again later\",\r\n});\r\n\r\napp.use(cors(corsOptions));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\n\r\napp.use('/api', apiLimiter);\r\napp.use('/api/contact', contactRoutes);\r\napp.use('/api/careers', careersRoutes);\r\n\r\n// Serve the built React frontend files\r\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\r\nconst frontendBuildPath = path.resolve(__dirname, '../../../react-frontend/dist');\r\napp.use(express.static(frontendBuildPath));\r\n\r\n// Catch-all route handler for serving the frontend index.html\r\napp.get('*', (req, res) => {\r\n  res.sendFile(path.join(frontendBuildPath, 'index.html'));\r\n});\r\n\r\napp.listen(port, () => {\r\n\tconsole.log(`Server running on port ${port}`);\r\n});\r\n"],"names":["express","cors","dotenv","contactRoutes","careersRoutes","rateLimit","path","fileURLToPath","config","app","port","process","env","PORT","corsOptions","origin","apiLimiter","windowMs","max","message","use","json","urlencoded","extended","__dirname","dirname","url","frontendBuildPath","resolve","static","get","req","res","sendFile","join","listen","console","log"],"mappings":"AAAA,OAAOA,aAAa,UAAU;AAC9B,OAAOC,UAAU,OAAO;AACxB,OAAOC,YAAY,SAAS;AAC5B,OAAOC,mBAAmB,4BAA4B;AACtD,OAAOC,mBAAmB,4BAA4B;AACtD,OAAOC,eAAe,qBAAqB;AAC3C,OAAOC,UAAU,OAAO;AACxB,SAASC,aAAa,QAAQ,MAAM;AAEpCL,OAAOM,MAAM;AAEb,MAAMC,MAAMT;AACZ,MAAMU,OAAOC,QAAQC,GAAG,CAACC,IAAI,IAAI;AACjC,MAAMC,cAAc;IAClBC,QAAQ;AACV;AAEA,MAAMC,aAAaX,UAAU;IAC5BY,UAAU,KAAK,KAAK;IACpBC,KAAK;IACLC,SAAS;AACV;AAEAV,IAAIW,GAAG,CAACnB,KAAKa;AACbL,IAAIW,GAAG,CAACpB,QAAQqB,IAAI;AACpBZ,IAAIW,GAAG,CAACpB,QAAQsB,UAAU,CAAC;IAAEC,UAAU;AAAK;AAE5Cd,IAAIW,GAAG,CAAC,QAAQJ;AAChBP,IAAIW,GAAG,CAAC,gBAAgBjB;AACxBM,IAAIW,GAAG,CAAC,gBAAgBhB;AAExB,uCAAuC;AACvC,MAAMoB,YAAYlB,KAAKmB,OAAO,CAAClB,cAAc,YAAYmB,GAAG;AAC5D,MAAMC,oBAAoBrB,KAAKsB,OAAO,CAACJ,WAAW;AAClDf,IAAIW,GAAG,CAACpB,QAAQ6B,MAAM,CAACF;AAEvB,8DAA8D;AAC9DlB,IAAIqB,GAAG,CAAC,KAAK,CAACC,KAAKC;IACjBA,IAAIC,QAAQ,CAAC3B,KAAK4B,IAAI,CAACP,mBAAmB;AAC5C;AAEAlB,IAAI0B,MAAM,CAACzB,MAAM;IAChB0B,QAAQC,GAAG,CAAC,CAAC,uBAAuB,EAAE3B,KAAK,CAAC;AAC7C"}